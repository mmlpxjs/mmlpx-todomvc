webpackJsonp([1],{KwzC:function(t,e){},dPlj:function(t,e){},q0qB:function(t,e){},qMEF:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("JnKo"),a=o("y986"),d=o("GiK3"),i=o.n(d),r=o("O27J"),c=o.n(r),p=(o("KwzC"),o("dPlj"),o("TToO")),s=o("8+St"),l=o("Mn8c"),u=o("q0qB"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={editingText:e.props.todo.title},e}var o,n,a;return p.__extends(e,t),e.prototype.handleChange=function(t){this.setState({editingText:t.target.value})},e.prototype.handleSubmit=function(t){var e=this.state.editingText.trim();e?(e!==t.title&&(this.props.onUpdate(p.__assign({},t,{title:e})),this.setState({editingText:e})),this.props.onEdit(t,!1)):this.props.onDestroy(t)},e.prototype.handleKeyDown=function(t,e){"Enter"===t.key?this.handleSubmit(e):"Escape"===t.key&&(this.setState({editingText:e.title}),this.props.onEdit(e,!1))},e.prototype.render=function(){var t=this,e=this.props,o=e.todo,n=e.editing,a=e.onToggle,d=e.onDestroy,r=e.onEdit,c=this.state.editingText;return i.a.createElement("li",{className:(o.completed?"completed":"")+" "+(n?"editing":"")},i.a.createElement("div",{className:"view"},i.a.createElement("input",{className:"toggle",type:"checkbox",checked:o.completed,onChange:function(){return a(o)}}),i.a.createElement("label",{onDoubleClick:function(){return r(o,!0)}},o.title),i.a.createElement("button",{className:"destroy",onClick:function(){return d(o)}})),i.a.createElement("input",{className:"edit",value:c,onBlur:function(){return t.handleSubmit(o)},onChange:this.handleChange,onKeyDown:function(e){return t.handleKeyDown(e,o)}}))},p.__decorate([Object(s.bind)(),p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Object]),p.__metadata("design:returntype",void 0)],e.prototype,"handleChange",null),p.__decorate([Object(s.bind)(),p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(o=void 0!==u.Todo&&u.Todo)&&o||Object]),p.__metadata("design:returntype",void 0)],e.prototype,"handleSubmit",null),p.__decorate([Object(s.bind)(),p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(n=void 0!==d.KeyboardEvent&&d.KeyboardEvent)&&n||Object,"function"==typeof(a=void 0!==u.Todo&&u.Todo)&&a||Object]),p.__metadata("design:returntype",void 0)],e.prototype,"handleKeyDown",null),e}(i.a.Component),m=function(){function t(){}return t.saveSnapshot=function(e){localStorage.setItem(t.snapshotKey,JSON.stringify(e))},t.getSnapshot=function(){return JSON.parse(localStorage.getItem(t.snapshotKey))},t.snapshotKey="mmlpx-snapshot",t}(),y=function(){function t(){this.uid=0,this.list=[]}var e,o;return t.prototype.addTodo=function(t){this.list.push({title:t,completed:!1,id:this.uid++})},t.prototype.removeTodo=function(t){this.list.splice(this.list.findIndex(function(e){return t.id===e.id}),1)},t.prototype.updateTodo=function(t){this.list.splice(this.list.findIndex(function(e){return t.id===e.id}),1,t)},t.prototype.toggleAll=function(t){this.list.forEach(function(e){return e.completed=t})},p.__decorate([a.observable,p.__metadata("design:type",Array)],t.prototype,"list",void 0),p.__decorate([a.action,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String]),p.__metadata("design:returntype",void 0)],t.prototype,"addTodo",null),p.__decorate([a.action,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(e=void 0!==u.Todo&&u.Todo)&&e||Object]),p.__metadata("design:returntype",void 0)],t.prototype,"removeTodo",null),p.__decorate([a.action,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(o=void 0!==u.Todo&&u.Todo)&&o||Object]),p.__metadata("design:returntype",void 0)],t.prototype,"updateTodo",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Boolean]),p.__metadata("design:returntype",void 0)],t.prototype,"toggleAll",null),t=p.__decorate([Object(n.a)("TodosStore.ts/TodosStore")],t)}(),g=function(){function t(){this.stack=[],this.cursor=0,this.inputtingTodo="",this.filter="all"}var e,o,d,i;return Object.defineProperty(t.prototype,"canRedo",{get:function(){return this.stack.length>1&&0<=this.cursor&&this.cursor<this.stack.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canUndo",{get:function(){return this.stack.length>1&&0<this.cursor&&this.cursor<this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allCompleted",{get:function(){return this.todosStore.list.every(function(t){return t.completed})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeTodos",{get:function(){return this.todosStore.list.filter(function(t){return!t.completed})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"completedTodos",{get:function(){return this.todosStore.list.filter(function(t){return t.completed})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleTodos",{get:function(){switch(this.filter){case"all":return this.todosStore.list;case"active":return this.activeTodos;case"completed":return this.completedTodos}},enumerable:!0,configurable:!0}),t.prototype.changeFilter=function(t){this.filter=t},t.prototype.onEdit=function(t,e){this.editingTodoId=e?t.id:null},t.prototype.onInputChange=function(t){this.inputtingTodo=t.trim()},t.prototype.addTodo=function(){this.inputtingTodo&&(this.todosStore.addTodo(this.inputtingTodo),this.inputtingTodo="")},t.prototype.removeTodo=function(t){this.todosStore.removeTodo(t)},t.prototype.updateTodo=function(t){this.todosStore.updateTodo(t)},t.prototype.toggleAll=function(){this.todosStore.toggleAll(!this.allCompleted)},t.prototype.clearCompleted=function(){var t=this;this.todosStore.list.slice().forEach(function(e){e.completed&&t.todosStore.removeTodo(e)})},t.prototype.enableRedoUndo=function(){var t=this;return this.stack.push(Object(n.d)()),Object(n.f)(function(e){Object(a.runInAction)(function(){t.stack.push(e),t.cursor=t.stack.length-1,m.saveSnapshot(e)})})},t.prototype.redo=function(){Object(n.c)(this.stack[++this.cursor])},t.prototype.undo=function(){Object(n.c)(this.stack[--this.cursor])},p.__decorate([Object(n.e)(),p.__metadata("design:type","function"==typeof(e=void 0!==y&&y)&&e||Object)],t.prototype,"todosStore",void 0),p.__decorate([a.observable,p.__metadata("design:type",Array)],t.prototype,"stack",void 0),p.__decorate([a.observable,p.__metadata("design:type",Object)],t.prototype,"cursor",void 0),p.__decorate([a.observable,p.__metadata("design:type",Object)],t.prototype,"inputtingTodo",void 0),p.__decorate([a.observable,p.__metadata("design:type",Object)],t.prototype,"editingTodoId",void 0),p.__decorate([a.observable,p.__metadata("design:type",String)],t.prototype,"filter",void 0),p.__decorate([a.computed,p.__metadata("design:type",Object),p.__metadata("design:paramtypes",[])],t.prototype,"canRedo",null),p.__decorate([a.computed,p.__metadata("design:type",Object),p.__metadata("design:paramtypes",[])],t.prototype,"canUndo",null),p.__decorate([a.computed,p.__metadata("design:type",Boolean),p.__metadata("design:paramtypes",[])],t.prototype,"allCompleted",null),p.__decorate([a.computed,p.__metadata("design:type",Object),p.__metadata("design:paramtypes",[])],t.prototype,"activeTodos",null),p.__decorate([a.computed,p.__metadata("design:type",Object),p.__metadata("design:paramtypes",[])],t.prototype,"completedTodos",null),p.__decorate([a.computed,p.__metadata("design:type",Object),p.__metadata("design:paramtypes",[])],t.prototype,"visibleTodos",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String]),p.__metadata("design:returntype",void 0)],t.prototype,"changeFilter",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(o=void 0!==u.Todo&&u.Todo)&&o||Object,Boolean]),p.__metadata("design:returntype",void 0)],t.prototype,"onEdit",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String]),p.__metadata("design:returntype",void 0)],t.prototype,"onInputChange",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],t.prototype,"addTodo",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(d=void 0!==u.Todo&&u.Todo)&&d||Object]),p.__metadata("design:returntype",void 0)],t.prototype,"removeTodo",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(i=void 0!==u.Todo&&u.Todo)&&i||Object]),p.__metadata("design:returntype",void 0)],t.prototype,"updateTodo",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],t.prototype,"toggleAll",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],t.prototype,"clearCompleted",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],t.prototype,"enableRedoUndo",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],t.prototype,"redo",null),p.__decorate([a.action.bound,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],t.prototype,"undo",null),t=p.__decorate([Object(n.b)("ViewModel.ts/TodoAppViewModel")],t)}(),h=function(t){var e=t.selected,o=t.caption,n=t.onClick;return i.a.createElement("li",null,i.a.createElement("a",{className:e?"selected":"",onClick:n,style:{cursor:"pointer"}},o)," ")},f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o,a;return p.__extends(e,t),e.prototype.componentDidMount=function(){this.disposer=this.viewModel.enableRedoUndo()},e.prototype.componentWillUnmount=function(){this.disposer()},e.prototype.handleNewTodoKeyDown=function(t){"Enter"===t.key&&this.viewModel.addTodo()},e.prototype.render=function(){var t=this.viewModel,e=t.inputtingTodo,o=t.activeTodos,n=t.onInputChange,a=t.toggleAll,d=t.allCompleted,r=t.visibleTodos,c=t.editingTodoId,s=t.onEdit,l=t.removeTodo,u=t.updateTodo,m=t.filter,y=t.changeFilter,g=t.completedTodos,f=t.clearCompleted,b=t.undo,v=t.redo,T=t.canRedo,E=t.canUndo;return i.a.createElement("section",null,i.a.createElement("div",{className:"todoapp"},i.a.createElement("header",{className:"header"},i.a.createElement("h1",null,"todos"),i.a.createElement("input",{className:"new-todo",placeholder:"What needs to be done?",value:e,onChange:function(t){return n(t.target.value)},onKeyDown:this.handleNewTodoKeyDown,autoFocus:!0})),i.a.createElement("section",{className:"main"},i.a.createElement("input",{id:"toggleAll",className:"toggle-all",type:"checkbox",onChange:a,checked:d}),r.length?i.a.createElement("label",{htmlFor:"toggleAll"}):null,i.a.createElement("ul",{className:"todo-list"},r.map(function(t){return i.a.createElement(_,{key:t.id,editing:t.id===c,onEdit:s,onDestroy:l,onToggle:function(t){return u(p.__assign({},t,{completed:!t.completed}))},onUpdate:u,todo:t})}))),o.length||g.length?i.a.createElement("footer",{className:"footer"},i.a.createElement("span",{className:"todo-count"},i.a.createElement("strong",null,o.length)," ",o.length>=1?"items":"item"," left"),i.a.createElement("ul",{className:"filters"},i.a.createElement(h,{selected:"all"===m,onClick:function(){return y("all")},caption:"All"}),i.a.createElement(h,{selected:"active"===m,onClick:function(){return y("active")},caption:"Active"}),i.a.createElement(h,{selected:"completed"===m,onClick:function(){return y("completed")},caption:"Completed"})),0===g.length?null:i.a.createElement("button",{className:"clear-completed",onClick:f},"Clear completed")):null),i.a.createElement("aside",{style:{textAlign:"center"},className:"record"},i.a.createElement("button",{type:"button",onClick:v,disabled:!T},"redo"),i.a.createElement("button",{type:"button",onClick:b,disabled:!E},"undo")))},p.__decorate([Object(n.e)(),p.__metadata("design:type","function"==typeof(o=void 0!==g&&g)&&o||Object)],e.prototype,"viewModel",void 0),p.__decorate([Object(s.bind)(),p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(a=void 0!==d.KeyboardEvent&&d.KeyboardEvent)&&a||Object]),p.__metadata("design:returntype",void 0)],e.prototype,"handleNewTodoKeyDown",null),e=p.__decorate([l.a],e)}(i.a.Component);Object(a.configure)({enforceActions:!0}),Object(n.c)(m.getSnapshot()),c.a.render(i.a.createElement(f,null),document.body.querySelector("main"))}},["qMEF"]);
//# sourceMappingURL=app-5f6198b3.min.js.map